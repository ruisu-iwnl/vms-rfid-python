{% extends 'dashboard/user/layout.html' %}

{% block title %}Vehicle Dashboard{% endblock %}

{% block header_title %}Registered Vehicles{% endblock %}

{% block content %}
    <!-- Main Content -->
    <div class="">
        <!-- Button to open modal -->
        <button id="openModalBtn" class="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-700 mb-4">Add Vehicle</button>
        
        <!-- Include the modal -->
        {% include 'dashboard/user/modals/addvehicle.html' %}

        <!-- Table Container -->
        <div class="bg-gray-100 p-6 rounded-lg shadow-md w-full max-w-6xl mb-8 relative">
            <h2 class="text-xl font-bold mb-4 text-gray-800">Registered Vehicles Table</h2>
            <table class="min-w-full divide-y divide-gray-300">
                <thead class="bg-gray-200">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">Car Model</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">License Plate</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">Actions</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-300">
                    {% for vehicle in vehicles %}
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ vehicle[0] }}</td> 
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">{{ vehicle[1] }}</td>  
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                                <a href="#" class="bg-blue-500 text-white py-1 px-2 rounded hover:bg-blue-700">Edit</a>
                                <a href="#" class="bg-red-500 text-white py-1 px-2 rounded hover:bg-red-700">Delete</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
                           
            </table>

            <!-- Pagination -->
            <div class="flex justify-center mt-4">
                <nav class="relative z-0 inline-flex shadow-sm -space-x-px" aria-label="Pagination">
                    {% if page > 1 %}
                        <a href="{{ url_for('vehicles.vehicles', page=page-1) }}" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                            Previous
                        </a>
                    {% endif %}
                    {% for p in range(1, total_pages + 1) %}
                        <a href="{{ url_for('vehicles.vehicles', page=p) }}" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium {{ 'bg-gray-200' if p == page else 'bg-white' }} hover:bg-gray-50">
                            {{ p }}
                        </a>
                    {% endfor %}
                    {% if page < total_pages %}
                        <a href="{{ url_for('vehicles.vehicles', page=page+1) }}" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                            Next
                        </a>
                    {% endif %}
                </nav>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('openModalBtn').addEventListener('click', function() {
            document.getElementById('vehicleModal').classList.remove('hidden');
        });
        
        document.getElementById('closeModalBtn').addEventListener('click', function() {
            document.getElementById('vehicleModal').classList.add('hidden');
        });
    </script>
{% endblock %}
