{% extends 'dashboard/user/layout.html' %}

{% block title %}Vehicles | TimeGuard {% endblock %}

{% block header_title %}Vehicles{% endblock %}

{% block content %}
    <!-- Main Content -->
    <div class="w-full h-full p-6">
        <!-- Button to open modal -->
        <button id="openModalBtn" class="bg-green-500 text-black py-4 px-8 rounded border border-black hover:bg-green-700 mb-4" style="background-color: #eeeee4; font-size: 1.25rem;">
            <img src="{{ url_for('static', filename='images/icons/addvehicle.svg') }}" alt="Add" class="inline h-8 w-8 mr-2"> Register a Vehicle
        </button>
        
        <!-- Include the modal -->
        {% include 'dashboard/user/modals/addvehicle.html' %}
    
        <!-- Table Container -->
        <div class="bg-[#eeeee4] p-6 rounded-lg shadow-md w-full max-w-full mb-8 relative">
            <table class="min-w-full divide-y divide-gray-300">
                <thead class="bg-[#eeeee4]">
                    <tr>
                        <th class="px-6 py-3 text-left text-lg font-medium text-black uppercase tracking-wider">Car Make</th>
                        <th class="px-6 py-3 text-left text-lg font-medium text-black uppercase tracking-wider">Car Model</th>
                        <th class="px-6 py-3 text-left text-lg font-medium text-black uppercase tracking-wider">License Plate</th>
                        <th class="px-6 py-3 text-left text-lg font-medium text-black uppercase tracking-wider">Actions</th>
                    </tr>
                </thead>
                <tbody class="bg-[#eeeee4] divide-y divide-gray-300">
                    {% for vehicle in vehicles %}
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-lg font-medium text-black">{{ vehicle[0] }}</td> 
                            <td class="px-6 py-4 whitespace-nowrap text-lg font-medium text-black">{{ vehicle[1] }}</td>  
                            <td class="px-6 py-4 whitespace-nowrap text-lg text-black">{{ vehicle[2] }}</td>  
                            <td class="px-6 py-4 whitespace-nowrap text-lg text-black">
                                <!-- Action buttons can go here -->
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!-- Pagination -->
            <div class="flex justify-center mt-4">
                <nav class="relative z-0 inline-flex shadow-sm -space-x-px" aria-label="Pagination">
                    {% if page > 1 %}
                        <a href="{{ url_for('vehicles.vehicles', page=page-1) }}" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-lg font-medium text-black bg-white hover:bg-gray-50">
                            Previous
                        </a>
                    {% endif %}
                    {% for p in range(1, total_pages + 1) %}
                        <a href="{{ url_for('vehicles.vehicles', page=p) }}" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-lg font-medium {{ 'bg-gray-200' if p == page else 'bg-white' }} hover:bg-gray-50">
                            {{ p }}
                        </a>
                    {% endfor %}
                    {% if page < total_pages %}
                        <a href="{{ url_for('vehicles.vehicles', page=page+1) }}" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-lg font-medium text-black bg-white hover:bg-gray-50">
                            Next
                        </a>
                    {% endif %}
                </nav>
            </div>
        </div>

    </div>
    

    <script>
        document.getElementById('openModalBtn').addEventListener('click', function() {
            const modal = document.getElementById('vehicleModal');
            modal.classList.remove('hidden');
            // Trigger the transition
            setTimeout(() => modal.classList.add('show'), 10);
        });

        document.getElementById('closeModalBtn').addEventListener('click', function() {
            const modal = document.getElementById('vehicleModal');
            modal.classList.remove('show');
            setTimeout(() => modal.classList.add('hidden'), 300); 
        });
    </script>
{% endblock %}
